{% extends "base.j2.html" %}
{% block title %}over_gene{% endblock %}
{% block head %}{% endblock %}

{% block body %}
<div class='row page'>


	<form id = 'ha' action = '/over_gene' method="POST" class="well span6 offset3" enctype="multipart/form-data">

		<div class="row">
			<div class="span3">
				<p>
        <h3>Search <em>overlap CNVs</em> with {{name_map}} genes table</h3>
				<em><strong>{{dbfile}}</strong></em>
				</p>
				<b><i>{{message}}</i></b>
			</div>
			<div class="span2 offset1">
				<img src="/static/img/gemini.png" width="150px" class="img-rounded">
			</div>
		</div>


		<br>
		<input type="checkbox" name="gen_check" value="on" {{'checked="checked"' if gen_check else ""}}/>
		You can load a custom map   <i>(.BED or .txt without header): </i>
		<input type="file" name="genemap" />
		<br>
		<br>
		Samples contained in VCF


		<div>
			<table class='table table-striped table-hover table-condensed'>
				<tbody>
					{%for row_s in rows_sample %}
							 {% if loop.index0 == 0 %}
								<tr>
										{%for col_s in row_s %}
										<th>{{col_s}}</th>
										{% endfor %}
								</tr>
								{% endif %}

								<tr>
									{%for col_s in row_s %}
										<td>{{ row_s[col_s]}}</td>
									{% endfor %}
								</tr>

					{% endfor %}
				</tbody>
			</table>
		</div>

		You can select one or more sample <i>(comma separated)</i>: <textarea rows="1" type="text" name="sample">{{sample}}</textarea>
		<br>

		<hr>

		<div>
			<strong>Filter the overlap interval by percent (min,max or a range)</strong>
			<table>
				<td><textarea rows="1" type="text" name="perc_min" ></textarea></td>
				<td><textarea rows="1" type="text" name="perc_max" ></textarea></td>
			</table>
		</div>

		<hr>

		<div class="control-group">
 			<div class="controls">
 				<button type="submit" class="btn btn-large btn-primary" name="submit" value="submit">Submit</button>
				<button type="submit" class="btn btn-large btn-success" name="save" value="save">Save as text file</button>
				<button type="submit" class="btn btn-large btn-success" name="heatmap" value="save">Heatmap</button>
			</div>
		</div>
	</form>


	<div class="span12 table-wrapper">
		<table class='table table-striped table-hover table-condensed'>
			<tbody>
				{%for row in rows %}
	           {% if loop.index0 == 0 %}
	            <tr>
	                {%for col in row %}
	                <th>{{col}}</th>
	                {% endfor %}
	            </tr>
	            {% endif %}

							<tr>
								{%for col in row %}
									<td>{{ row[col]}}</td>
								{% endfor %}
							</tr>

				{% endfor %}
			</tbody>
		</table>
	</div> <!-- end of debug-pane -->

</div>

{% endblock %}
